<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <script src="./guard-pro.js?v=1"></script>  
  <title>DIGIY MARKET PRO ‚Äî POS</title>
  <meta name="theme-color" content="#0b1020" />

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Guard -->
  <script src="./guard.js?v=marketpro-pos-final"></script>

  <style>
    :root{
      --bg:#0b1020;--bg2:#050816;--card:#0f172a;--line:rgba(148,163,184,.18);
      --ink:#f8fafc;--muted:rgba(226,232,240,.68);
      --gold:#facc15;--ok:#22c55e;--bad:#f97373;--cyan:#38bdf8;
      --shadow: 0 20px 80px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 20% 0%, rgba(250,204,21,.10), transparent 55%),
        radial-gradient(900px 700px at 90% 20%, rgba(56,189,248,.10), transparent 55%),
        radial-gradient(900px 700px at 40% 95%, rgba(34,197,94,.08), transparent 55%),
        linear-gradient(180deg,var(--bg2),var(--bg));
    }
    header{
      position:sticky;top:0;z-index:30;
      backdrop-filter: blur(10px);
      background: rgba(11,16,32,.78);
      border-bottom: 1px solid var(--line);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:12px}
    .top{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{
      width:42px;height:42px;border-radius:14px;
      display:grid;place-items:center;font-size:18px;
      background:linear-gradient(135deg, rgba(250,204,21,.22), rgba(250,204,21,.06));
      border:1px solid rgba(250,204,21,.28);
    }
    h1{margin:0;font-size:16px;letter-spacing:.3px}
    .sub{margin:2px 0 0 0;color:var(--muted);font-size:12px}
    .pill{
      display:inline-block;padding:2px 8px;border-radius:999px;
      border:1px solid var(--line);font-size:11px;color:var(--muted);
    }
    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .btn{
      padding:10px 12px;border-radius:12px;
      border:1px solid var(--line);
      background:rgba(2,6,23,.35);
      color:var(--ink);
      font-weight:900;
      cursor:pointer;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px)}
    .btn.gold{border-color:rgba(250,204,21,.30); background:rgba(250,204,21,.12)}
    .btn.cyan{border-color:rgba(56,189,248,.30); background:rgba(56,189,248,.10)}
    .btn.bad{border-color:rgba(249,115,115,.35); background:rgba(249,115,115,.10)}
    .btn.ok{border-color:rgba(34,197,94,.35); background:rgba(34,197,94,.10)}
    .btn:disabled{opacity:.5;cursor:not-allowed;transform:none}

    main{max-width:1200px;margin:0 auto;padding:12px}
    .grid{display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:12px}
    .card{
      grid-column: span 12;
      background:rgba(15,23,42,.68);
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      box-shadow: var(--shadow);
    }
    @media(min-width:980px){
      .c5{grid-column: span 5}
      .c7{grid-column: span 7}
    }
    .label{color:var(--muted);font-size:12px;margin-bottom:6px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .muted{color:var(--muted);font-size:12px}
    #guard_status{
      position:fixed;top:14px;right:14px;z-index:9999;
      background:rgba(0,0,0,.82);border:1px solid rgba(255,255,255,.08);
      color:#fff;padding:10px 12px;border-radius:12px;font-weight:1000;font-size:12px;
    }
    code{background:rgba(2,6,23,.35);border:1px solid var(--line);padding:1px 6px;border-radius:8px}

    .scanBar{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
    }
    .input{
      flex:1;
      min-width:240px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(2,6,23,.35);
      color:var(--ink);
      font-weight:900;
      outline:none;
    }
    .input::placeholder{color:rgba(226,232,240,.45);font-weight:800}
    .mini{padding:8px 10px;border-radius:12px;font-weight:900}

    .list{
      margin-top:10px;
      display:grid;
      gap:8px;
    }
    .item{
      display:flex;justify-content:space-between;gap:10px;align-items:flex-start;
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px;
      background:rgba(2,6,23,.25);
    }
    .name{font-weight:1000}
    .subline{color:var(--muted);font-size:12px;margin-top:2px}
    .right{text-align:right}
    .qtyBox{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin-top:6px}
    .qtyBtn{
      width:34px;height:34px;border-radius:12px;
      border:1px solid var(--line);
      background:rgba(15,23,42,.55);
      color:var(--ink);font-weight:1000;cursor:pointer;
    }
    .qtyVal{min-width:34px;text-align:center;font-weight:1000}

    .totals{
      display:grid;gap:8px;margin-top:10px;
      border-top:1px dashed var(--line);
      padding-top:10px;
    }
    .totRow{display:flex;justify-content:space-between;gap:10px}
    .bigTotal{font-size:20px;font-weight:1100}

    .payGrid{display:grid;gap:10px;margin-top:10px}
    .payRow{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .payRow .input{min-width:160px}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}

    .toast{
      margin-top:10px;
      padding:10px 12px;border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.35);
      font-weight:900;font-size:12px;
      min-height:18px;
    }
    .toast.ok{border-color:rgba(34,197,94,.35)}
    .toast.bad{border-color:rgba(249,115,115,.35)}
  </style>
</head>

<body>
  <div id="guard_status">üîê V√©rification‚Ä¶</div>

  <header>
    <div class="wrap">
      <div class="top">
        <div class="brand">
          <div class="logo">üõí</div>
          <div>
            <h1>DIGIY MARKET PRO ‚Äî POS <span class="pill" id="pillSlug">slug: ‚Äî</span></h1>
            <div class="sub" id="subTitle">Caisse grande surface ‚Ä¢ Scan ‚Ä¢ Panier ‚Ä¢ Ticket</div>
          </div>
        </div>
        <div class="actions">
          <button class="btn cyan" id="btnFocus">üéØ Scan</button>
          <button class="btn gold" id="btnLastTicket">üßæ Ticket dernier</button>
          <button class="btn" id="btnClearCart">üßπ Vider panier</button>
          <button class="btn bad" id="btnLogout">üö™ Quitter</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="grid">

      <div class="card c5">
        <div class="label">Scan / Recherche</div>
        <div class="scanBar">
          <input id="scanInput" class="input" autocomplete="off" inputmode="search"
                 placeholder="Scan code-barres / SKU / Nom (ex: 1234567890123)" />
          <button class="btn ok" id="btnAdd">‚ûï Ajouter</button>
        </div>
        <div class="hint">Astuce terrain : focus auto sur scan. Entr√©e = ajoute au panier.</div>
        <div class="toast" id="scanToast">Pr√™t.</div>

        <div style="height:10px"></div>
        <div class="label">Dernier trouv√©</div>
        <div id="lastFound" class="muted">‚Äî</div>
      </div>

      <div class="card c7">
        <div class="label">Panier</div>
        <div id="cartList" class="list"></div>

        <div class="totals">
          <div class="totRow"><div class="muted">Sous-total</div><div id="tSub">0 FCFA</div></div>
          <div class="totRow"><div class="muted">TVA</div><div id="tTax">0 FCFA</div></div>
          <div class="totRow"><div class="bigTotal">TOTAL</div><div class="bigTotal" id="tTotal">0 FCFA</div></div>
        </div>

     <div class="payGrid">
  <div class="label">Paiement</div>

  <div class="payRow">
    <input id="payCash" class="input" inputmode="numeric"
           placeholder="Cash (FCFA) ex: 3000" />
    <input id="payWave" class="input" inputmode="numeric"
           placeholder="Wave (FCFA) ex: 2000" />
    <input id="payWaveRef" class="input"
           placeholder="Ref Wave (option)" />
  </div>

  <div class="payRow">
    <button class="btn gold" id="btnCheckout">üí∏ Encaisser</button>
    <button class="btn" id="btnTicket">üßæ Ouvrir ticket</button>
  </div>

  <!-- ‚úÖ Livraison / FRET doit √™tre ici -->
  <div class="payRow">
    <input id="deliveryId" class="input"
           placeholder="UUID Livraison / FRET (option)" />
    <button class="btn cyan" id="btnConfirmReceived">
      ‚úÖ Confirmer re√ßu
    </button>
  </div>

  <div class="hint">
    Encaisser cr√©e le ticket + sort le stock.
    Ensuite on enregistre le paiement mix.
  </div>
          <div class="toast" id="payToast">‚Äî</div>
      </div> <!-- /payGrid -->

    </div> <!-- /card c7 -->
  </div>   <!-- /grid -->
</main>

<script>

    const $ = (s)=>document.querySelector(s);

    function setStatus(txt){
      const el = $("#guard_status");
      if(el) el.textContent = txt;
    }
    function hideStatus(){
      const el = $("#guard_status");
      if(el) el.style.display = "none";
    }
    function money(n){
      const x = Number(n || 0);
      return (isFinite(x) ? Math.round(x) : 0).toString() + " FCFA";
    }
    function num(v){
      const s = String(v||"").replace(/[^\d.]/g,"");
      const n = Number(s);
      return isFinite(n) ? n : 0;
    }
    function toast(el, msg, kind){
      el.textContent = msg || "";
      el.classList.remove("ok","bad");
      if(kind) el.classList.add(kind);
    }

    // =============================
    // STATE
    // =============================
    let CTX = { slug:"", owner_id:"", store_id:"" };
    let CART = []; // {id,name,barcode,price_sale,tax_rate,track_stock,qty_onhand,qty}

    function cartKey(p){ return p.id; }
    function findCart(pid){ return CART.find(x=>x.id===pid); }

    function calc(){
      let sub=0,tax=0;
      for(const it of CART){
        const line = (Number(it.qty)||0) * (Number(it.price_sale)||0);
        sub += line;
        tax += line * (Number(it.tax_rate)||0)/100;
      }
      return { sub: Math.round(sub), tax: Math.round(tax), total: Math.round(sub+tax) };
    }

    function renderCart(){
      const box = $("#cartList");
      box.innerHTML = "";

      if(CART.length===0){
        box.innerHTML = `<div class="muted">Panier vide. Scanne un article.</div>`;
        $("#tSub").textContent = money(0);
        $("#tTax").textContent = money(0);
        $("#tTotal").textContent = money(0);
        return;
      }

      for(const it of CART){
        const wrap = document.createElement("div");
        wrap.className = "item";
        wrap.innerHTML = `
          <div>
            <div class="name">${escapeHtml(it.name || "Article")}</div>
            <div class="subline">
              ${it.barcode ? ("barcode: <code>"+escapeHtml(it.barcode)+"</code> ‚Ä¢ ") : ""}
              stock: <b>${Number(it.qty_onhand||0)}</b>
            </div>
            <div class="qtyBox">
              <button class="qtyBtn" data-act="dec" data-id="${it.id}">‚àí</button>
              <div class="qtyVal">${Number(it.qty||0)}</div>
              <button class="qtyBtn" data-act="inc" data-id="${it.id}">+</button>
              <button class="btn mini bad" data-act="rm" data-id="${it.id}">Suppr</button>
            </div>
          </div>
          <div class="right">
            <div><b>${money(it.price_sale)}</b></div>
            <div class="subline">TVA ${Number(it.tax_rate||0)}%</div>
            <div style="margin-top:8px;font-weight:1100">${money((Number(it.qty)||0)*Number(it.price_sale||0))}</div>
          </div>
        `;
        box.appendChild(wrap);
      }

      const t = calc();
      $("#tSub").textContent = money(t.sub);
      $("#tTax").textContent = money(t.tax);
      $("#tTotal").textContent = money(t.total);

      // Delegation clicks
      box.querySelectorAll("[data-act]").forEach(btn=>{
        btn.onclick = ()=>{
          const act = btn.getAttribute("data-act");
          const id  = btn.getAttribute("data-id");
          const it = findCart(id);
          if(!it) return;

          if(act==="inc"){
            it.qty = (Number(it.qty)||0) + 1;
          }else if(act==="dec"){
            it.qty = Math.max(1, (Number(it.qty)||0) - 1);
          }else if(act==="rm"){
            CART = CART.filter(x=>x.id!==id);
          }
          renderCart();
        };
      });
    }

    function escapeHtml(s){
      return String(s||"")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // =============================
    // SUPABASE (from guard)
    // =============================
    function sb(){
      const x = window.DIGIY_GUARD?.getSb?.();
      return x || null;
    }

    // =============================
    // MARKET OPS
    // =============================
    async function ensureStore(){
      const x = sb();
      if(!x) throw new Error("Supabase non pr√™t");

      const { data, error } = await x.rpc("market_get_store_by_slug", { p_slug: CTX.slug });
      if(error) throw new Error(error.message);

      const res = (typeof data === "string") ? safeJson(data) : data;
      if(!res?.ok) throw new Error(res?.reason || "store refus√©");

      CTX.store_id = (res.store_id || "").toString().trim();
      return res;
    }

    function safeJson(s){ try{ return JSON.parse(s); }catch(_){ return null; } }

    async function scanAndGetOne(q){
      const x = sb();
      if(!x) throw new Error("Supabase non pr√™t");

      q = String(q||"").trim();
      if(!q) return null;

      const { data, error } = await x.rpc("market_scan_by_slug", { p_slug: CTX.slug, p_q: q });
      if(error) throw new Error(error.message);

      const res = (typeof data === "string") ? safeJson(data) : data;
      if(!res?.ok) throw new Error(res?.reason || "scan refus√©");

      const items = res.items || [];
      if(items.length === 0) return null;
      return items[0];
    }

    function addToCart(prod){
      const existing = findCart(prod.id);
      if(existing){
        existing.qty = (Number(existing.qty)||0) + 1;
      }else{
        CART.push({
          id: prod.id,
          name: prod.name,
          barcode: prod.barcode,
          sku: prod.sku,
          price_sale: Number(prod.price_sale||0),
          tax_rate: Number(prod.tax_rate||0),
          track_stock: !!prod.track_stock,
          qty_onhand: Number(prod.qty_onhand||0),
          qty: 1
        });
      }
      renderCart();
    }

    async function checkout(){
      const payToast = $("#payToast");
      toast(payToast, "Encaissement‚Ä¶", "");

      if(CART.length === 0){
        toast(payToast, "Panier vide.", "bad");
        return;
      }

      // payments
      const cash = num($("#payCash").value);
      const wave = num($("#payWave").value);
      const waveRef = String($("#payWaveRef").value||"").trim();

      const t = calc();
      const paid = Math.round(cash + wave);

      // build items jsonb
      const items = CART.map(it=>({
        product_id: it.id,
        qty: Number(it.qty||0),
        unit_price: Number(it.price_sale||0),
        tax_rate: Number(it.tax_rate||0)
      }));

      // 1) commit sale (creates sale_id + stock moves)
      const x = sb();
      if(!x){ toast(payToast, "Supabase non pr√™t.", "bad"); return; }

      const { data: d1, error: e1 } = await x.rpc("market_commit_sale_by_slug", {
        p_slug: CTX.slug,
        p_owner_id: CTX.owner_id,
        p_payment_method: "cash", // on mettra mix apr√®s
        p_paid_amount: paid,
        p_items: items
      });

      if(e1){ toast(payToast, e1.message, "bad"); return; }
      const r1 = (typeof d1 === "string") ? safeJson(d1) : d1;
      if(!r1?.ok){ toast(payToast, r1?.reason || "Vente refus√©e", "bad"); return; }

      const saleId = String(r1.sale_id || "").trim();
      if(!saleId){ toast(payToast, "sale_id manquant", "bad"); return; }

      // ‚úÖ m√©morise dernier ticket (c‚Äôest ICI)
      localStorage.setItem("DIGIY_LAST_SALE_ID", saleId);

      const deliveryId0 = String($("#deliveryId")?.value || "").trim();
      if(deliveryId0) localStorage.setItem("DIGIY_LAST_DELIVERY_ID", deliveryId0);
      
      // 2) set payments mix (optional)
      const payments = [];
      if(cash > 0) payments.push({ method:"cash", amount: Math.round(cash) });
      if(wave > 0) payments.push({ method:"wave", amount: Math.round(wave), reference: waveRef || null });

      if(payments.length > 0){
        const { data: d2, error: e2 } = await x.rpc("market_set_payments_by_slug", {
          p_slug: CTX.slug,
          p_owner_id: CTX.owner_id,
          p_sale_id: saleId,
          p_payments: payments
        });

        if(e2){
          toast(payToast, "Vente OK, mais paiement mix KO: " + e2.message, "bad");
        }else{
          const r2 = (typeof d2 === "string") ? safeJson(d2) : d2;
          if(!r2?.ok){
            toast(payToast, "Vente OK, paiement mix refus√©: " + (r2?.reason||""), "bad");
          }else{
            toast(payToast, "‚úÖ Vente OK ‚Ä¢ Ticket: " + saleId.slice(0,8) + "‚Ä¶ ‚Ä¢ Total: " + money(t.total), "ok");
          }
        }
      }else{
        toast(payToast, "‚úÖ Vente OK (paiement non saisi) ‚Ä¢ Ticket: " + saleId.slice(0,8) + "‚Ä¶", "ok");
      }

      // reset cart
      CART = [];
      renderCart();
      $("#payCash").value = "";
      $("#payWave").value = "";
      $("#payWaveRef").value = "";

      // open ticket
      setTimeout(()=>{
        location.href = `./ticket.html?slug=${encodeURIComponent(CTX.slug)}&sale_id=${encodeURIComponent(saleId)}`;
      }, 350);
    }

    // =============================
    // UI WIRING
    // =============================
    function focusScan(){
      const inp = $("#scanInput");
      if(inp){ inp.focus(); inp.select?.(); }
    }

    async function addFromScan(){
      const scanToast = $("#scanToast");
      const q = String($("#scanInput").value||"").trim();
      if(!q){
        toast(scanToast, "Tape ou scanne un code.", "bad");
        return;
      }
      try{
        toast(scanToast, "Recherche‚Ä¶", "");
        const p = await scanAndGetOne(q);
        if(!p){
          toast(scanToast, "Aucun produit trouv√©.", "bad");
          $("#lastFound").textContent = "‚Äî";
          return;
        }
        $("#lastFound").innerHTML =
          `<b>${escapeHtml(p.name||"Article")}</b> ‚Ä¢ ${p.barcode ? ("barcode <code>"+escapeHtml(p.barcode)+"</code> ‚Ä¢ ") : ""}stock <b>${Number(p.qty_onhand||0)}</b> ‚Ä¢ prix <b>${money(p.price_sale)}</b>`;
        addToCart(p);
        toast(scanToast, "‚úÖ Ajout√© au panier", "ok");
        $("#scanInput").value = "";
        focusScan();
      }catch(e){
        console.error(e);
        toast(scanToast, "‚ùå " + (e?.message || "Erreur scan"), "bad");
      }
    }

    $("#btnFocus").onclick = focusScan;
    $("#btnAdd").onclick = addFromScan;

    $("#scanInput").addEventListener("keydown", (e)=>{
      if(e.key === "Enter"){
        e.preventDefault();
        addFromScan();
      }
    });

    $("#btnClearCart").onclick = ()=>{
      CART = [];
      renderCart();
      toast($("#payToast"), "Panier vid√©.", "");
      focusScan();
    };

    $("#btnCheckout").onclick = checkout;

// ‚úÖ Confirm delivery received (Vinted/FRET) -> RPC d√©j√† pos√©e
$("#btnConfirmReceived")?.addEventListener("click", async ()=>{
  const payToast = $("#payToast");
  try{
    const x = sb(); if(!x) throw new Error("Supabase non pr√™t");

    const saleId = (localStorage.getItem("DIGIY_LAST_SALE_ID") || "").trim();
    const deliveryId = String($("#deliveryId")?.value || "").trim()
      || (localStorage.getItem("DIGIY_LAST_DELIVERY_ID") || "").trim();

    if(!saleId) throw new Error("Encaisse d'abord un ticket (sale_id manquant).");
    if(!deliveryId) throw new Error("UUID Livraison/FRET manquant.");

    toast(payToast, "Validation r√©ception‚Ä¶", "");

    const { data, error } = await x.rpc("market_confirm_delivery_received_v1", {
      p_slug: CTX.slug,
      p_owner_id: CTX.owner_id,
      p_sale_id: saleId,
      p_delivery_id: deliveryId
    });

    if(error) throw new Error(error.message);

    const res = (typeof data === "string") ? safeJson(data) : data;
    if(!res?.ok) throw new Error(res?.reason || "Refus confirmation");

    localStorage.setItem("DIGIY_LAST_DELIVERY_ID", deliveryId);
    toast(payToast, "‚úÖ Re√ßu confirm√© ‚Ä¢ Ticket PAID", "ok");
  }catch(e){
    console.error(e);
    toast(payToast, "‚ùå " + (e?.message || "Erreur"), "bad");
  }
});
    
    $("#btnTicket").onclick = ()=>{
      const saleId = (localStorage.getItem("DIGIY_LAST_SALE_ID") || "").trim();
      if(!saleId){
        toast($("#payToast"), "Aucun ticket m√©moris√©.", "bad");
        return;
      }
      location.href = `./ticket.html?slug=${encodeURIComponent(CTX.slug)}&sale_id=${encodeURIComponent(saleId)}`;
    };

    $("#btnLastTicket").onclick = ()=>{
      const saleId = (localStorage.getItem("DIGIY_LAST_SALE_ID") || "").trim();
      if(!saleId){
        toast($("#payToast"), "Aucun ticket m√©moris√©.", "bad");
        return;
      }
      location.href = `./ticket.html?slug=${encodeURIComponent(CTX.slug)}&sale_id=${encodeURIComponent(saleId)}`;
    };

    $("#btnLogout").onclick = ()=>{
      try{ window.DIGIY_GUARD.logout("./pin.html"); }catch(_){ location.replace("./pin.html"); }
    };

    // =============================
    // BOOT GUARD
    // =============================
    (async ()=>{
      try{
        if(!window.DIGIY_GUARD?.boot){
          setStatus("‚ùå Guard absent");
          console.error("Guard absent / guard.js non charg√©");
          return;
        }

        setStatus("üîê V√©rification‚Ä¶");
        const res = await window.DIGIY_GUARD.boot({ login: "./pin.html" });
        if(!res.ok) return;

        const s = res.session || {};
        CTX.slug = (res.slug || s.slug || "").trim();
        CTX.owner_id = (s.owner_id || "").trim();

        $("#pillSlug").textContent = "slug: " + (CTX.slug || "‚Äî");
        $("#subTitle").textContent = (s.title ? (s.title + " ‚Ä¢ ") : "") + "Caisse grande surface ‚Ä¢ Scan ‚Ä¢ Panier ‚Ä¢ Ticket";

        // store provisioning
        await ensureStore();

        setStatus("‚úÖ Acc√®s OK");
        setTimeout(hideStatus, 650);

        renderCart();
        focusScan();

        console.log("üõí MARKET PRO POS READY", { slug: CTX.slug, owner_id: CTX.owner_id, store_id: CTX.store_id });
      }catch(e){
        console.error(e);
        setStatus("‚ùå Erreur acc√®s");
      }
    })();
  </script>
    
  <!-- ‚úÖ DIGIY KNOWLEDGE ‚Äî Assistant MARKET PRO -->
  <div data-digiy-module="MARKET"></div>
  <script defer src="https://knowledge.digiylyfe.com/widget/digiy-widget-pro.js"></script>

</body>
</html>
